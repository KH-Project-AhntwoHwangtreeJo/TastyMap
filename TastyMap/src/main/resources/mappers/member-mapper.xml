<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
	<resultMap type="Member" id="memberMap">
		<result property="hobby" column="hobby" typeHandler="Str2ArrayHandler"/>
	</resultMap>
	
	<select id="loginMember" parameterType="Member" resultMap="memberMap">
		SELECT * FROM MEMBER
		WHERE USERID=#{ userId }
	</select>
	
	<insert id="insertMember" parameterType="Member">
		INSERT INTO MEMBER
		VALUES( #{ userId }, #{ password }, #{ userName }, #{ gender },
				 #{ age }, #{ email } , #{ phone }, #{ address } ,
				 #{ hobby, typeHandler=Str2ArrayHandler} ,DEFAULT)
	</insert>
	
	<update id="updateMember" parameterType="Member">
		UPDATE MEMBER
		<set>
		USERNAME=#{ userName },
		AGE=#{ age },
		EMAIL=#{ email },
		PHONE=#{ phone },
		ADDRESS=#{ address },
		GENDER=#{ gender },
		HOBBY=#{ hobby , typeHandler=Str2ArrayHandler }
		</set>
		WHERE USERID=#{ userId }
	</update>
	
	
	<delete id="deleteMember" parameterType="string"> 
	 	DELETE MEMBER
	 	WHERE USERID=#{ userId }
	</delete>
	
	<select id="checkIdDuplicate" parameterType="HashMap" statementType="CALLABLE">
		{ CALL ID_DUP_CHECK(
                       #{userId, mode=IN, jdbcType=VARCHAR}, 
                     #{result, mode=OUT, jdbcType=NUMERIC, javaType=integer} ) 
       }
	</select>
</mapper>










