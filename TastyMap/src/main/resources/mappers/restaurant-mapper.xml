<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="restaurantMapper">
	
	<select id="selectTop8" resultType="Restaurant">
		SELECT ROUND(AVG_STAR, 1), R.*
		FROM (
        	    SELECT AVG(STAR) "AVG_STAR",COUNT(RNO), RNO
            	FROM POST
            	GROUP BY RNO
            	ORDER BY 1 DESC, 2 DESC) S
		JOIN RESTAURANT R ON(R.RNO=S.RNO)
		<![CDATA[WHERE ROWNUM<10]]>
	</select>
	
	<select id="influencerTop8" resultType="Restaurant">
		SELECT ROUND(AVG_STAR, 1), R.*
		FROM (
        	    SELECT AVG(STAR) "AVG_STAR",COUNT(RNO), RNO
            	FROM POST
            	GROUP BY RNO
            	ORDER BY 1 DESC, 2 DESC) S
		JOIN RESTAURANT R ON(R.RNO=S.RNO)
		<![CDATA[WHERE ROWNUM<10]]>
	</select>
	
</mapper>










